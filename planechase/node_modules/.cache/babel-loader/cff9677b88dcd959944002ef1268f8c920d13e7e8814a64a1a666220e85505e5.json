{"ast":null,"code":"import { getMappedPlane } from \"./utils\";\nimport { planeImages } from \"./consts.js\";\nfunction getHeadersJson() {\n  return {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Access-Control-Request-Headers': '*',\n    'Access-Control-Allow-Origin': '*'\n  };\n}\nexport async function getSession(sessionCode) {\n  //   curl --location 'https://us-east-1.aws.data.mongodb-api.com/app/data-napyt/endpoint/data/v1/action/findOne' \\\n  // --header 'Content-Type: application/json' \\\n  // --header 'Access-Control-Request-Headers: *' \\\n  // --header 'api-key: kqhoHk09XphZcWMeBlGUOgDSXwvQDDkkn5mRXreTwyV6afivwZYiTnit6JSt7JyO' \\\n  // --header 'Accept: application/json' \\\n  // --data '{\n  //       \"dataSource\": \"dhuber-cluster-0\",\n  //       \"database\": \"planechase\",\n  //       \"collection\": \"sessions\",\n  //       \"filter\": { \"_id\": \"ABCD\"  }\n  //   }'\n\n  console.log('getting session ' + sessionCode);\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/getSession/${sessionCode}/`).then(response => response.json()).then(data => {\n    const plane = getMappedPlane(data[1].fields, planeImages);\n    return {\n      code: data[0].pk,\n      plane: plane,\n      rollCost: data[0].fields.rollCost,\n      rollResult: data[0].fields.rollResult,\n      planarDeck: data[0].fields.planarDeck\n    };\n  }).catch(error => console.log('error getting sessions: ' + error));\n}\nexport async function makeNewSession(activePlane, planarDeck) {\n  const options = {\n    method: 'POST',\n    headers: getHeadersJson,\n    body: JSON.stringify(planarDeck)\n  };\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/makeSession/${activePlane.id}/`, options).then(response => response.json()).then(data => {\n    const plane = getMappedPlane(data[1].fields, planeImages);\n    return {\n      code: data[0].pk,\n      plane: plane,\n      rollCost: data[0].fields.rollCost,\n      rollResult: data[0].fields.rollResult,\n      planarDeck: data[0].fields.planarDeck\n    };\n  }).catch(error => console.log('error making session: ' + error));\n}\nexport async function getAllPlanes() {\n  console.log('getAllPlanes');\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/getWebcamFriendlyPlanes/`).then(response => response.json()).catch(error => console.log('error getting all planes: ' + error));\n}\nexport async function updateSession(sessionCode, data) {\n  const options = {\n    method: 'POST',\n    headers: getHeadersJson,\n    body: JSON.stringify(data)\n  };\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/updateSession/${sessionCode}/`, options).then(response => response.json()).then(data => {\n    const plane = getMappedPlane(data[1].fields, planeImages);\n    return {\n      code: data[0].pk,\n      plane: plane,\n      rollCost: data[0].fields.rollCost,\n      rollResult: data[0].fields.rollResult,\n      planarDeck: data[0].fields.planarDeck\n    };\n  }).catch(error => console.log('error making session: ' + error));\n}\nexport async function searchScryfall(searchTerms) {\n  return await fetch(`https://api.scryfall.com/cards/search?q=${searchTerms}`).then(response => response.json()).then();\n}","map":{"version":3,"names":["getMappedPlane","planeImages","getHeadersJson","getSession","sessionCode","console","log","fetch","then","response","json","data","plane","fields","code","pk","rollCost","rollResult","planarDeck","catch","error","makeNewSession","activePlane","options","method","headers","body","JSON","stringify","id","getAllPlanes","updateSession","searchScryfall","searchTerms"],"sources":["/Users/danhuber/Desktop/development/planechase-new/planechase/src/tools/fetches.js"],"sourcesContent":["import { getMappedPlane } from \"./utils\";\nimport { planeImages } from \"./consts.js\";\n\nfunction getHeadersJson() {\n  return {\n    'Content-Type': 'application/json',\n    'Accept': 'application/json',\n    'Access-Control-Request-Headers': '*',\n    'Access-Control-Allow-Origin': '*'\n  }\n}\n\nexport async function getSession(sessionCode) {\n//   curl --location 'https://us-east-1.aws.data.mongodb-api.com/app/data-napyt/endpoint/data/v1/action/findOne' \\\n// --header 'Content-Type: application/json' \\\n// --header 'Access-Control-Request-Headers: *' \\\n// --header 'api-key: kqhoHk09XphZcWMeBlGUOgDSXwvQDDkkn5mRXreTwyV6afivwZYiTnit6JSt7JyO' \\\n// --header 'Accept: application/json' \\\n// --data '{\n//       \"dataSource\": \"dhuber-cluster-0\",\n//       \"database\": \"planechase\",\n//       \"collection\": \"sessions\",\n//       \"filter\": { \"_id\": \"ABCD\"  }\n//   }'\n\n  console.log('getting session ' + sessionCode);\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/getSession/${sessionCode}/`)\n    .then(response => response.json())\n    .then(data => {\n      const plane = getMappedPlane(data[1].fields, planeImages);\n      return {\n        code: data[0].pk,\n        plane: plane,\n        rollCost: data[0].fields.rollCost,\n        rollResult: data[0].fields.rollResult,\n        planarDeck: data[0].fields.planarDeck\n      };\n    })\n    .catch(error => console.log('error getting sessions: ' + error));\n}\n\nexport async function makeNewSession(activePlane, planarDeck) {\n  const options = {\n    method: 'POST',\n    headers: getHeadersJson,\n    body: JSON.stringify(planarDeck)\n  };\n\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/makeSession/${activePlane.id}/`, options)\n    .then(response => response.json())\n    .then(data => {\n      const plane = getMappedPlane(data[1].fields, planeImages);\n      return {\n        code: data[0].pk,\n        plane: plane,\n        rollCost: data[0].fields.rollCost,\n        rollResult: data[0].fields.rollResult,\n        planarDeck: data[0].fields.planarDeck\n      };\n    })\n    .catch(error => console.log('error making session: ' + error));\n}\n\nexport async function getAllPlanes() {\n  console.log('getAllPlanes');\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/getWebcamFriendlyPlanes/`)\n    .then(response => response.json())\n    .catch(error => console.log('error getting all planes: ' + error));\n}\n\nexport async function updateSession(sessionCode, data) {\n  const options = {\n    method: 'POST',\n    headers: getHeadersJson,\n    body: JSON.stringify(data)\n  };\n\n  return await fetch(`https://dhuber.pythonanywhere.com/planechaseSessions/updateSession/${sessionCode}/`, options)\n    .then(response => response.json())\n    .then(data => {\n      const plane = getMappedPlane(data[1].fields, planeImages);\n      return {\n        code: data[0].pk,\n        plane: plane,\n        rollCost: data[0].fields.rollCost,\n        rollResult: data[0].fields.rollResult,\n        planarDeck: data[0].fields.planarDeck\n      };\n    })\n    .catch(error => console.log('error making session: ' + error));\n}\n\nexport async function searchScryfall(searchTerms) {\n  return await fetch (`https://api.scryfall.com/cards/search?q=${searchTerms}`)\n    .then(response => response.json())\n    .then()\n}"],"mappings":"AAAA,SAASA,cAAc,QAAQ,SAAS;AACxC,SAASC,WAAW,QAAQ,aAAa;AAEzC,SAASC,cAAcA,CAAA,EAAG;EACxB,OAAO;IACL,cAAc,EAAE,kBAAkB;IAClC,QAAQ,EAAE,kBAAkB;IAC5B,gCAAgC,EAAE,GAAG;IACrC,6BAA6B,EAAE;EACjC,CAAC;AACH;AAEA,OAAO,eAAeC,UAAUA,CAACC,WAAW,EAAE;EAC9C;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;EACA;;EAEEC,OAAO,CAACC,GAAG,CAAC,kBAAkB,GAAGF,WAAW,CAAC;EAC7C,OAAO,MAAMG,KAAK,CAAE,mEAAkEH,WAAY,GAAE,CAAC,CAClGI,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;IACZ,MAAMC,KAAK,GAAGZ,cAAc,CAACW,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,EAAEZ,WAAW,CAAC;IACzD,OAAO;MACLa,IAAI,EAAEH,IAAI,CAAC,CAAC,CAAC,CAACI,EAAE;MAChBH,KAAK,EAAEA,KAAK;MACZI,QAAQ,EAAEL,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACG,QAAQ;MACjCC,UAAU,EAAEN,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACI,UAAU;MACrCC,UAAU,EAAEP,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACK;IAC7B,CAAC;EACH,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIf,OAAO,CAACC,GAAG,CAAC,0BAA0B,GAAGc,KAAK,CAAC,CAAC;AACpE;AAEA,OAAO,eAAeC,cAAcA,CAACC,WAAW,EAAEJ,UAAU,EAAE;EAC5D,MAAMK,OAAO,GAAG;IACdC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAEvB,cAAc;IACvBwB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACV,UAAU;EACjC,CAAC;EAED,OAAO,MAAMX,KAAK,CAAE,oEAAmEe,WAAW,CAACO,EAAG,GAAE,EAAEN,OAAO,CAAC,CAC/Gf,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;IACZ,MAAMC,KAAK,GAAGZ,cAAc,CAACW,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,EAAEZ,WAAW,CAAC;IACzD,OAAO;MACLa,IAAI,EAAEH,IAAI,CAAC,CAAC,CAAC,CAACI,EAAE;MAChBH,KAAK,EAAEA,KAAK;MACZI,QAAQ,EAAEL,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACG,QAAQ;MACjCC,UAAU,EAAEN,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACI,UAAU;MACrCC,UAAU,EAAEP,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACK;IAC7B,CAAC;EACH,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIf,OAAO,CAACC,GAAG,CAAC,wBAAwB,GAAGc,KAAK,CAAC,CAAC;AAClE;AAEA,OAAO,eAAeU,YAAYA,CAAA,EAAG;EACnCzB,OAAO,CAACC,GAAG,CAAC,cAAc,CAAC;EAC3B,OAAO,MAAMC,KAAK,CAAE,+EAA8E,CAAC,CAChGC,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCS,KAAK,CAACC,KAAK,IAAIf,OAAO,CAACC,GAAG,CAAC,4BAA4B,GAAGc,KAAK,CAAC,CAAC;AACtE;AAEA,OAAO,eAAeW,aAAaA,CAAC3B,WAAW,EAAEO,IAAI,EAAE;EACrD,MAAMY,OAAO,GAAG;IACdC,MAAM,EAAE,MAAM;IACdC,OAAO,EAAEvB,cAAc;IACvBwB,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACjB,IAAI;EAC3B,CAAC;EAED,OAAO,MAAMJ,KAAK,CAAE,sEAAqEH,WAAY,GAAE,EAAEmB,OAAO,CAAC,CAC9Gf,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAACG,IAAI,IAAI;IACZ,MAAMC,KAAK,GAAGZ,cAAc,CAACW,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,EAAEZ,WAAW,CAAC;IACzD,OAAO;MACLa,IAAI,EAAEH,IAAI,CAAC,CAAC,CAAC,CAACI,EAAE;MAChBH,KAAK,EAAEA,KAAK;MACZI,QAAQ,EAAEL,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACG,QAAQ;MACjCC,UAAU,EAAEN,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACI,UAAU;MACrCC,UAAU,EAAEP,IAAI,CAAC,CAAC,CAAC,CAACE,MAAM,CAACK;IAC7B,CAAC;EACH,CAAC,CAAC,CACDC,KAAK,CAACC,KAAK,IAAIf,OAAO,CAACC,GAAG,CAAC,wBAAwB,GAAGc,KAAK,CAAC,CAAC;AAClE;AAEA,OAAO,eAAeY,cAAcA,CAACC,WAAW,EAAE;EAChD,OAAO,MAAM1B,KAAK,CAAG,2CAA0C0B,WAAY,EAAC,CAAC,CAC1EzB,IAAI,CAACC,QAAQ,IAAIA,QAAQ,CAACC,IAAI,CAAC,CAAC,CAAC,CACjCF,IAAI,CAAC,CAAC;AACX"},"metadata":{},"sourceType":"module","externalDependencies":[]}